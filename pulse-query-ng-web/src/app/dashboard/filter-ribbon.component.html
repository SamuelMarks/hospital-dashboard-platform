<div class="ribbon-container">
  
  <!-- Icon / Label -->
  <div class="filter-label">
    <mat-icon style="font-size: 18px; width: 18px; height: 18px;">filter_list</mat-icon>
    <span>Data Filters</span>
  </div>

  <!-- 1. Department Selector -->
  <mat-form-field appearance="outline" class="ribbon-field">
    <mat-label>Department</mat-label>
    <mat-select [formControl]="deptControl" placeholder="All Departments">
      <mat-option [value]="null">All Departments</mat-option>
      <!-- In a real app, these would come from an API/Store -->
      <mat-option value="Cardiology">Cardiology</mat-option>
      <mat-option value="Neurology">Neurology</mat-option>
      <mat-option value="Orthopedics">Orthopedics</mat-option>
      <mat-option value="Emergency">Emergency</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- 2. Date Range Picker -->
  <mat-form-field appearance="outline" class="ribbon-field date-field">
    <mat-label>Reporting Period</mat-label>
    <mat-date-range-input [rangePicker]="picker" separator=" â€“ ">
      <input 
        matStartDate 
        placeholder="Start" 
        [formControl]="startDate" 
        (dateChange)="onDateChange()" 
        aria-label="Start Date" 
      >
      <input 
        matEndDate 
        placeholder="End" 
        [formControl]="endDate" 
        (dateChange)="onDateChange()" 
        aria-label="End Date" 
      >
    </mat-date-range-input>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker></mat-date-range-picker>
  </mat-form-field>

  <!-- 3. Clear Action (Conditional) -->
  @if (store.globalParams()['dept'] || store.globalParams()['start_date']) { 
    <button 
      mat-button 
      color="warn" 
      (click)="clearFilters()" 
      class="text-xs" 
      aria-label="Clear active filters" 
    >
      <mat-icon style="font-size: 16px; width: 16px; height: 16px; margin-right: 4px;">highlight_off</mat-icon>
      Clear
    </button>
  } 

</div>