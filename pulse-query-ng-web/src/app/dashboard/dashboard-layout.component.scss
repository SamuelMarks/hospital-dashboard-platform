/* Root Viewport */ 
:host { 
  display: flex; 
  flex-direction: column; 
  /* CHANGE: Using percentage height instead of viewport height because it is now wrapped in App flex container */
  height: 100%; 
  /* Ensure min-height resets so it doesn't overflow parent */
  min-height: 0; 
  background-color: var(--sys-background); 
} 

.dashboard-sidnav-container { 
  flex-grow: 1; 
  background-color: transparent; 
} 

.editor-sidenav { 
  width: 340px; 
  background-color: var(--sys-surface); 
  border-left: 1px solid var(--sys-surface-border); 
} 

.sidebar-stack { 
  display: flex; 
  flex-direction: column; 
  height: 100%; 
  min-height: 0; 
} 

.cart-pane { 
  flex: 0 0 auto; 
} 

.gallery-pane { 
  flex: 1 1 auto; 
  min-height: 0; 
} 

.view-port { 
  padding: 16px; 
  box-sizing: border-box; 
  height: 100%; 
  display: flex; 
  flex-direction: column; 
} 

/* Ensure grid centers locally */ 
.dashboard-grid, .ghost-grid, .empty-state { 
  width: 100%; 
  max-width: 1920px; 
  margin: 0 auto; 
} 

/* TV Mode Override */ 
.tv-view { 
  overflow: hidden; 
  padding: 24px; 
} 

.dashboard-grid { 
  display: grid; 
  grid-template-columns: repeat(12, minmax(0, 1fr)); 
  gap: 24px; 
  min-height: 150px; 
  align-items: start; 
} 

.grid-item { 
  position: relative; 
  min-width: 0; 
  height: 100%; 
  min-height: 150px; 
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1); 
} 

.widget-content { height: 100%; width: 100%; } 

.item-draggable { cursor: grab; } 
.item-draggable:active { cursor: grabbing; } 

.cdk-drag-preview { 
  box-sizing: border-box; 
  border-radius: 8px; 
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2); 
  background-color: var(--sys-surface); 
  opacity: 0.95; 
  z-index: 10000; 
} 

.drag-placeholder { 
  background: rgba(0, 0, 0, 0.05); 
  border: 2px dashed var(--sys-primary); 
  border-radius: 8px; 
  opacity: 0.8; 
  height: 100%; 
  width: 100%; 
  display: block; 
} 

.cdk-drag-animating { 
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1); 
} 

.resize-handle { 
  position: absolute; bottom: 0; right: 0; width: 20px; height: 20px; 
  cursor: nwse-resize; z-index: 20; display: none; 
} 
.resize-handle::after { 
  content: ''; position: absolute; bottom: 4px; right: 4px; border-style: solid; 
  border-width: 0 0 12px 12px; border-color: transparent transparent var(--sys-primary) transparent; opacity: 0.7; 
} 
.grid-item:hover .resize-handle { display: block; } 

.ghost-grid { 
  display: grid; grid-template-columns: repeat(12, 1fr); gap: 24px; padding-bottom: 24px; 
} 
.ghost-card { 
  background: var(--sys-surface); border: 1px solid var(--sys-surface-border); border-radius: 8px; padding: 8px; 
} 
.h-2 { height: 320px; } 

.focus-overlay { 
  position: fixed; inset: 0; z-index: 10000; background-color: rgba(0, 0, 0, 0.85); 
  backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; padding: 32px; 
} 
.focus-container { 
  width: 100%; height: 100%; background-color: var(--sys-background); 
  border-radius: 8px; box-shadow: 0 24px 38px 3px rgba(0,0,0,0.14); overflow: hidden; position: relative; 
} 

.tv-carousel-header { 
  padding: 24px; background: var(--sys-surface); border-bottom: 4px solid var(--sys-primary); 
  display: flex; justify-content: space-between; align-items: center; 
} 
.tv-dashboard-title { font-size: 2.5rem; font-weight: 300; color: var(--sys-text-primary); } 
.tv-last-updated { font-size: 1rem; color: var(--sys-text-secondary); font-family: monospace; } 

@media (max-width: 1024px) { 
  .dashboard-grid { grid-template-columns: repeat(2, 1fr); } 
  .grid-item { grid-column: span 1 !important; } 
} 
@media (max-width: 768px) { 
  .dashboard-grid { grid-template-columns: 1fr; } 
  .view-port { padding: 8px; } 
}
