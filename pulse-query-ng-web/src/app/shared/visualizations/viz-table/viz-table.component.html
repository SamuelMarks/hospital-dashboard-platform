<div class="table-container">
  <table
    mat-table
    [dataSource]="dataSource"
    class="mat-elevation-z0"
    aria-label="Data Results Table"
  >
    @for (col of finalColumns(); track col) {
      <ng-container [matColumnDef]="col">
        <th mat-header-cell *matHeaderCellDef scope="col">{{ col }}</th>
        <td mat-cell *matCellDef="let row">
          <!-- Applied heuristic styling and threshold class binding -->
          <span [ngClass]="getCellClass(row, col)">
            {{ getCellValue(row, col) }}
          </span>
        </td>
      </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="finalColumns(); sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: finalColumns()"></tr>

    <tr *matNoDataRow>
      <td [attr.colspan]="finalColumns().length" class="p-8 text-center text-gray-500 italic">
        No data available
      </td>
    </tr>
  </table>
</div>

<mat-paginator
  [pageSize]="10"
  [pageSizeOptions]="[5, 10, 20]"
  showFirstLastButtons
  class="border-t"
  aria-label="Table Paginator"
></mat-paginator>
